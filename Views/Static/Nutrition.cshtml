<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Care Pulse - Nutrition</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', sans-serif;
        }

        body {
            margin: 0;
            background: linear-gradient(to right, #43cea2, #185a9d);
            color: #333;
            min-height: 100vh;
        }

        .glass-container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin: 30px auto;
            padding: 30px;
            max-width: 1100px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.2);
        }

        h1, h2 {
            text-align: center;
            margin-bottom: 20px;
        }

        .condition-buttons {
            text-align: center;
            margin-bottom: 30px;
        }

            .condition-buttons button {
                background-color: rgba(255, 255, 255, 0.7);
                border: none;
                padding: 12px 24px;
                margin: 8px;
                font-size: 16px;
                border-radius: 12px;
                cursor: pointer;
                transition: background-color 0.3s ease;
            }

                .condition-buttons button:hover {
                    background-color: #d2f4ff;
                }

        .meal-section {
            display: none;
            flex-wrap: wrap;
            justify-content: space-around;
            margin-top: 30px;
            animation: fadeIn 0.6s ease forwards;
        }

        .meal-card {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 16px;
            padding: 20px;
            margin: 15px;
            width: 300px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

            .meal-card:hover {
                transform: scale(1.05);
            }

            .meal-card img {
                width: 80px;
                height: 80px;
                border-radius: 50%;
                object-fit: cover;
                display: block;
                margin: 0 auto 10px;
                background-color: #f0f0f0;
                padding: 5px;
            }

        .chart-section {
            margin: 40px auto;
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.85);
            border-radius: 16px;
            max-width: 400px;
            display: none;
        }

        .snack-advice {
            margin-top: 30px;
            background: rgba(255,255,255,0.8);
            padding: 20px;
            border-left: 6px solid #43cea2;
            border-radius: 12px;
            font-size: 18px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 20px;
        }

            .logo-container img {
                width: 160px;
                height: auto;
                border-radius: 10px;
                box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            }

        @@keyframes fadeIn {
            from

        {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }
    </style>
</head>
<body>
    <div class="glass-container">
        <div class="logo-container">
            <img src="/Imagess/Logo.jpg" alt="Care Pulse Logo" onerror="this.src='data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%22160%22 height%3D%2280%22 viewBox%3D%220 0 160 80%22%3E%3Crect width%3D%22160%22 height%3D%2280%22 fill%3D%22%2343cea2%22 rx%3D%2210%22%2F%3E%3Ctext x%3D%2280%22 y%3D%2245%22 text-anchor%3D%22middle%22 font-family%3D%22Arial%22 font-size%3D%2220%22 fill%3D%22white%22%3ECare Pulse%3C%2Ftext%3E%3C%2Fsvg%3E'">
        </div>

        <h1>Smart Nutrition Guidance</h1>
        <p style="text-align:center;">Personalized recommendations based on your health condition</p>

        <div class="condition-buttons">
            <button onclick="showMeals('diabetic')">Diabetic</button>
            <button onclick="showMeals('hypertension')">Hypertension</button>
            <button onclick="showMeals('cholesterol')">Cholesterol</button>
            <button onclick="showMeals('wellness')">Wellness</button>
        </div>

        <!-- محتوى الوجبات -->
        <div id="mealsContainer" class="meal-section"></div>

        <div class="chart-section" id="chartSection">
            <h2>Nutrition Breakdown</h2>
            <canvas id="nutritionChart" width="300" height="300"></canvas>
        </div>

        <div class="snack-advice">
            <h2>Healthy Snack Recommendations for Specific Conditions</h2>

            <h3>1. High Cholesterol</h3>
            <ul>
                <li>Choose fiber-rich and unsaturated fat snacks.</li>
                <li>Examples: raw almonds or walnuts (20–25g), fresh veggies with hummus, fresh fruits like apples or berries.</li>
                <li>Avoid fried or processed snacks and salted nuts.</li>
            </ul>

            <h3>2. Diabetes</h3>
            <ul>
                <li>Opt for low-glycemic, high-fiber snacks.</li>
                <li>Examples: low-fat yogurt with chia seeds or nuts, fresh vegetables (carrots, celery) with light dip, fruits like apple or berries in controlled portions.</li>
                <li>Avoid sugary juices and desserts.</li>
            </ul>

            <h3>3. Hypertension</h3>
            <ul>
                <li>Reduce salt intake and choose potassium-rich snacks.</li>
                <li>Examples: unsalted nuts (almonds, walnuts), fruits like banana or orange, fresh vegetables (cucumber, carrot).</li>
                <li>Avoid chips, processed, and salty snacks.</li>
            </ul>

            <h3>General Rule</h3>
            <ul>
                <li>Keep snacks small (100–200 kcal).</li>
                <li>Focus on fiber, protein, or healthy fats.</li>
                <li>Minimize added sugar and excess salt.</li>
            </ul>
        </div>
    </div>

    <script>
        // دالة لمعالجة أخطاء الصور
        function handleImageError(img) {
          // إنشاء صورة بديلة باستخدام SVG
          const mealType = img.alt.toLowerCase();
          const color = '#43cea2';
          const text = mealType.includes('breakfast') ? 'Breakfast' :
                      mealType.includes('lunch') ? 'Lunch' :
                      mealType.includes('dinner') ? 'Dinner' : 'Meal';

          img.src = `data:image/svg+xml;charset=utf-8,%3Csvg xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22 width%3D%2280%22 height%3D%2280%22 viewBox%3D%220 0 80 80%22%3E%3Ccircle cx%3D%2240%22 cy%3D%2240%22 r%3D%2238%22 fill%3D%22${encodeURIComponent(color)}%22%2F%3E%3Ctext x%3D%2240%22 y%3D%2245%22 text-anchor%3D%22middle%22 font-family%3D%22Arial%22 font-size%3D%2212%22 fill%3D%22white%22%3E${encodeURIComponent(text)}%3C%2Ftext%3E%3C%2Fsvg%3E`;
          img.onerror = null; // منع التكرار
        }

        const mealData = {
          diabetic: {
            chart: [45, 35, 20],
            meals: [
              {
                title: "Breakfast - 450 kcal",
                img: "/Imagess/eg.jpg",
                items: ["Oats (50g)", "Low-fat milk (200ml)", "1 Boiled egg"]
              },
              {
                title: "Lunch - 600 kcal",
                img: "/Imagess/ch.jpg",
                items: ["Grilled chicken (100g)", "Quinoa (60g)", "Steamed vegetables"]
              },
              {
                title: "Dinner - 500 kcal",
                img: "/Imagess/greek.jpg",
                items: ["Lentil soup (1 cup)", "Whole wheat toast", "Greek yogurt (100g)"]
              }
            ]
          },
          hypertension: {
            chart: [50, 30, 20],
            meals: [
              {
                title: "Breakfast - 400 kcal",
                img: "/Imagess/cheeses.jpg",
                items: ["Whole grain bread 70g", "Low-sodium cheese 30g", "Cucumber slices 100g"]
              },
              {
                title: "Lunch - 550 kcal",
                img: "/Imagess/tur.jpg",
                items: ["Grilled turkey 120g", "Brown rice 80g", "Steamed spinach 150g"]
              },
              {
                title: "Dinner - 450 kcal",
                img: "/Imagess/sweetpotato.jpg",
                items: ["Vegetable soup 250g", "Sweet potato 150g", "Low-fat yogurt 100g"]
              }
            ]
          },
          cholesterol: {
            chart: [55, 25, 20],
            meals: [
              {
                title: "Breakfast - 420 kcal",
                img: "/Imagess/blueB.jpg",
                items: ["Oatmeal 50g", "Almond milk 200g", "Blueberries 50g"]
              },
              {
                title: "Lunch - 600 kcal",
                img: "/Imagess/SALMON.jpg",
                items: ["Grilled salmon 120g", "Wild rice 70g", "Broccoli 100g"]
              },
              {
                title: "Dinner - 480 kcal",
                img: "/Imagess/SALAD.jpg",
                items: ["Hummus 100g", "Whole wheat pita 60g", "Salad 100g"]
              }
            ]
          },
          wellness: {
            chart: [50, 30, 20],
            meals: [
              {
                title: "Breakfast - 450 kcal",
                img: "/Imagess/e.jpg",
                items: ["Scrambled eggs 100g", "Whole grain toast 60g", "Tomatoes 100g"]
              },
              {
                title: "Lunch - 600 kcal",
                img: "/Imagess/MASH.jpg",
                items: ["Chicken breast 150g", "Mashed potatoes 200g", "Carrots 100g"]
              },
              {
                title: "Dinner - 500 kcal",
                img: "/Imagess/VEG.jpg",
                items: ["Vegetable stir-fry 200g", "Brown rice 150g", "Low-fat milk 200ml"]
              }
            ]
          }
        };

        function showMeals(condition) {
          const container = document.getElementById("mealsContainer");
          const chartSection = document.getElementById("chartSection");
          const data = mealData[condition];

          container.innerHTML = "";
          container.style.display = "flex";

          data.meals.forEach(meal => {
            const mealDiv = document.createElement("div");
            mealDiv.className = "meal-card";
            mealDiv.innerHTML = `
              <img src="${meal.img}" alt="${meal.title}" onerror="handleImageError(this)">
              <h3>${meal.title}</h3>
              <ul>${meal.items.map(item => `<li>${item}</li>`).join("")}</ul>
            `;
            container.appendChild(mealDiv);
          });

          chartSection.style.display = "block";

          const ctx = document.getElementById('nutritionChart').getContext('2d');
          if (window.myChart) window.myChart.destroy();
          window.myChart = new Chart(ctx, {
            type: 'pie',
            data: {
              labels: ['Carbohydrates', 'Protein', 'Fats'],
              datasets: [{
                label: 'Nutrition Breakdown',
                data: data.chart,
                backgroundColor: [
                  'rgba(66, 165, 245, 0.7)',
                  'rgba(102, 187, 106, 0.7)',
                  'rgba(255, 202, 40, 0.7)'
                ],
                borderColor: [
                  'rgba(66, 165, 245, 1)',
                  'rgba(102, 187, 106, 1)',
                  'rgba(255, 202, 40, 1)'
                ],
                borderWidth: 1
              }]
            },
            options: {
              responsive: true,
              plugins: {
                legend: {
                  position: 'bottom'
                }
              }
            }
          });
        }
    </script>
</body>
</html>